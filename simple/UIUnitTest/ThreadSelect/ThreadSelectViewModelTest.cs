using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using PeerstPlayer;
using Shule.Peerst.BBS;
using System.Collections.Generic;
using System.ComponentModel;

namespace UIUnitTest.ThreadSelect
{
	[TestClass]
	public class ThreadSelectViewModelTest
	{
		#region 想定データ：スレッド一覧

		string[] TestDataThreadTitle =
		{
			"【すんごくいいよ】ちなみに何のシュールch76【リリースしてこ】",
			"PeerstPlayer総合スレ３",
			"【qwebview.html】当たり前だろ！シュールch75【流行らない・・】",
			"17ch",
			"◆Map1e3XIx. だよ～ん！1355655961",
			"毒ｃｈ5",
			"【へーい彼女】早く寝ないとシュールch74【箱○】",
			"17chサミタ進出",
			"毒ｃｈ4",
			"備長炭73",
			"しっかりシュールｃｈ＠花見 73",
			"しっかりシュールｃｈ避難所",
			"てｓｔ",
			"【3項演算子は時々使う】ラクダ式シュールch72【中村光一】",
			"PeerstPlayer要望・バグ報告スレ",
			"毒ｃｈ3",
			"このゲームで最強の国作ろうずｗｗｗｗｗｗｗ",
			"【おっぱい】ケツマンコシュールch71【(*‘ω‘ *)】",
			"【愉快な家族】フライパンは？？シュールch70【ある意味企画通り】",
			"PeerstPlayer テストスレ",
			"NyankoR ch",
			"備長炭72",
			"毒ｃｈ2",
			"【ばっふぁやべぇわ】ごめんシュールch69【詳しくないのであれだが】",
			"シャクレ73cm",
			"リーシェch 28匹目のイヌ",
			"備長炭71",
			"PeerstPlayer総合スレ２",
			"備長炭70",
			"毒ｃｈ",
			"リーシェch 27発目のFB",
			"【ホワイトアウト】今度こそ恋！！！シュールch68【助かりますー】",
			"【ソースって自作？】今日も元気だシュールch67【股間が熱い】",
			"リーシェch 26回目のRTA",
			"備長炭69",
			"【青姦は】もっとつっこめシュールch66【シリの穴】",
			"PeerstPlayerツール妄想スレ",
			"リーシェch 25度目の全滅",
			"17ch",
			"シャクレ72cm",
			"【シュールがうんこなのは】ヴァッシュールch65【俺のPCのせいね】",
			"備長炭68",
			"シャクレ71cm",
			"シャクレ71cm",
			"【一応間に合った】ウイング付きシュールch64【でも少し漏れた】",
			"リーシェch 24回目のマロール",
			"【イカ臭い】LO大好きシュールch63片栗粉X【ドラッグストア　モリ】",
			"【てんが】ライトホモシュールch62【初体験】",
			"備長炭67",
			"ツャクレ70cm",
			"リーシェch 23回目のデュマピック",
			"17ｃｈ2スレ目",
			"リーシェch 22回目の就活",
			"PeerstPlayer総合スレ",
			"備長炭66",
			"シャクレ69cm",
			"17ｃｈ1スレ目",
			"備長炭y65",
			"リーシェch 21回目の乱入",
			"シャクレch　ドナルドTAで68分",
			"リーシェch 20回目のサクリファイス",
			"備長炭64",
			"備長炭63",
			"リーシェch 19回目の閃き",
			"リーシェch 18回目のおつかい",
			"リーシェch 17回目の閃き",
			"リーシェch Epi16",
			"【おいアゴチンコ】アッーシュールch61【メリークルシミマス】",
			"備長炭62",
			"シャクレ67cm",
			"シャクレ66cm",
			"リーシェch　Epi15",
			"リーシェch その14",
			"シャクレ65cm",
			"【クソだったけど】午後どれ選ぶ？シュールch60【擬似言語死ねｗｗ】",
			"リーシェch その13",
			"備長炭61",
			"備長炭60",
			"64万里",
			"備長炭59",
			"63番目の顎",
			"備長炭58",
			"62って素敵な数字だよね、まるでシャクレのようだ。",
			"リーシェch その12",
			"備長炭57",
			"備長炭56",
			"シャックレ60cm",
			"備長炭55",
			"シャクレ60cm",
			"備長炭54",
			"シャクレ59cm",
			"シャクレ58cm",
			"備長炭53",
			"リーシェch 11",
			"備長炭52",
			"備長炭51",
			"備長炭50",
			"備長炭49",
			"備長炭48",
			"【クソゲ学園】ちん子とさせ子とシュールch59【ファックだぴょん♪】",
			"備長炭47",
			"備長炭46",
			"備長炭45",
			"リーシェch 10",
			"ちんたらｃｈ　01",
			"備長炭44",
			"備長炭43",
			"シャクレ57cm",
			"備長炭42",
			"【oiちんこ自重】KEIKOの鼻シュールch58【マルチスレッド化だ！！】",
			"備長炭41",
			"シャクレ56cm",
			"シャクレ55cm",
			"リーシェch 09",
			"シャクレ54cm",
			"【小麦粉】肉買ったシュールch57【ちんこ祭り】",
			"シャクレ53cm",
			"【ちんこ】ちんこシュールch56【ちんこ阻止】",
			"シャクレ52cm",
			"【歩くガンプラ】しっかりシュールch55【びんちんたん】",
			"【ちんこ】勃起したシュールch54【まんこ】",
			"【くそミソ】時にぶっかけるシュールch53【やったねチンコないよ】",
			"備長炭40",
			"備長炭39",
			"リーシェｃｈ 08",
			"シャクレ51cm",
			"シャクレ50cm",
			"【ちんこ】ちんこシュールch52【スペ３であがるとか】",
			"シャクレ49cm",
			"【ち○こ花火】菊門は花火みたいなシュールch52【ちんこ】",
			"シャクレ48cm",
			"シャクレ47cm",
			"連絡用スレ",
			"リーシェch 07",
			"シャクレ46cm",
			"syakiure45vm",
			"【配信しよう】今北ちーっすシュールch51【ちんこ】",
			"シャクレ44cm",
			"シャクレ43cm",
			"シャクレ42cm",
			"シャクレ41cm",
			"シャクレ40cm",
			"シャクレ39cm",
			"isokiriテスト",
			"シャクレ　小田ちゃんへのアプローチ38回目",
			"【ちんこ】フリーズシュールch50【ちんこ好きな童貞次長しろ】",
			"ぶらっく08",
			"備長炭38",
			"シャクレ37cm",
			"シャクレ36cm",
			"シャクレ35cm",
			"シャクレ34cm",
			"【レッドエイト】気の利いたシュールch49【終わってるぞｗｗｗ】",
			"シャクレ33cm",
			"【とりあえず脱ごうか】魔法少女シュールch48【触手プレイ】",
			"シャクレ32cm",
			"【熟れた肉便器】家畜シュールch47【奥さん米屋です】",
			"シャクレ31cm",
			"備長炭37",
			"シャクレ30cm",
			"備長炭36",
			"シャクレ　28cm",
			"備長炭35",
			"備長炭34",
			"めぢ　1",
			"シャクレ28cm",
			"リーシェch 06",
			"シャクレ27cm",
			"【ぺこ可愛いよ】エロいのかｋｗｓｋシュールch46【みせてー】",
			"備長炭33",
			"【とにかく早いうちに】終わらないシュールch45【はじめられない】",
			"シャクレ26cm",
			"【sage】シュールへタレダナシュールch44【age】",
			"ぶらっく07",
			"シャクレ25cm",
			"リーシェch 05",
			"【プログラムは作業】ぶらっく就職シュールch43【就職は計画的に】",
			"シャクレ24cm",
			"備長炭32",
			"【富樫仕事しろ】マジｷﾁシュールch42【蘇るイナゴ】",
			"シャクレ23cm",
			"ぶらっく06",
			"リーシェch 04",
			"【シュールが揺れてますよ！】ｹﾞｽﾄ放置シュールch41【ちんこ】",
			"【マンキン】妊娠シュールch40【キンタマン】",
			"備長炭31",
			"シャクレ22ｾﾝﾁﾐｰﾀﾛﾝｸﾞ",
			"備長炭30",
			"【おっぱい】えっちなシュールch39【いっぱい】",
			"シャクレ21cm",
			"【くぱぁ】ぽんぽん痛いシュールch38【ぬるぬる】",
			"【かぷっちゅー】漢字も英語も読めないシュールch37【またここかよ】",
			"シャクレ19cm",
			"【毀誉褒貶】懐かしのシュールch36【黯然銷魂】",
			"備長炭29",
			"【ぬれあわび】チリシュールch35【まんこ】",
			"【ものまねしとりにいこうぜ】果汁100%シュールch34【クッパ】",
			"【くぱぁ】ｋｓｋｓｔシュールch(スレ数)【くぱぁびっち】",
			"アゴ19",
			"備長炭28",
			"【○ンコ】歩く猥褻物シュールch32【くぱぁ】",
			"sシャクレ18cm",
			"【運打開乙】くぱぁシュールch31【ょぅι゛ょの味方】",
			"シャクレ17cm",
			"【ｿﾌﾄｰｸDJしゅーる 】くぱぁｼｭｰﾙch30【バイトあんの？ 】",
			"【シャクレが義弟】しっかりシュールch29ファック【勝っちゃった♪】",
			"シャクレ16cm",
			"【おいしそうな】しっかりシュールch28プログラムできません【がっ】",
			"【裏白録画】備長炭27【どうして・・・】",
			"シャクレ15階（笑）",
			"シャクレ14cm",
			"リーシェch 03",
			"シャクレ13cm",
			"シャクレ12cm",
			"備長炭２６",
			"シャクレ11cm",
			"備長炭２５",
			"シャクレ10cm",
			"Frappuccino",
			"シャクレ9cm",
			"【妹可愛い】しっかりシュールch27ばれるだろ！【シュール派　３％】",
			"シャクレ8cm",
			"【やっぱりびっちが】しっかりシュールch26分かってる【おっぱい！】",
			"シャクレ7cm",
			"シャクレ6cm",
			"【二次ロリ好き】しっかりシュールch25自信あるの？【三次興味無い】",
			"リーシェch 02",
			"シャクレ5cm",
			"【前聞いたんだが】しっかりシュールch24大阪人って【･･･ｇｋｒ】",
			"シャクレ　4cm",
			"【jetstream】しっかりシュールch23オブジェクト指向【==じゃね？】",
			"備長炭２４",
			"シャクレ3cm",
			"備長炭２３",
			"【酒】しっかりシュールch22しゃくれ【煙草】",
			"シャクレ2cm",
			"シャクレ",
			"備長炭２２",
			"【サル頭】しっかりシュールch21(21)【黒縁メガネ】",
			"【リア充乙】しっかりシュールch20誰に凸るの？【たのしいさんすう】",
			"【ポ　ラ　ロイド】しっかりシュールch1989【ちんちんお！】",
			"リーシェch 01",
			"【くそみそ】しっかりシュールch18歳のテク【アッー！】",
			"備長炭２１",
			"【びちょびちょ】シュールch17というのはガセ【にゃんにゃんお】",
			"【C#厨】しっかりシュールch16はつべｃｈ【にゃんにゃんお！】",
			"【あげさげ】しっかりシュールch15回生【乳○くっきり】",
			"備長炭２０",
			"【勃起した】しっかりシュールch【ロリコンでガチホモ】",
			"備長炭１９",
			"備長炭１８",
			"あかーいはーんてーんきーせまーしょか",
			"ぶらっく05",
			"ガビョウ 踏むと痛い",
			"備長炭１７",
			"重度の依存症",
			"備長炭１６",
			"削除依頼スレ",
			"備長炭１５",
			"びんたんちゅきちゅき～byしゅーる",
			"備長炭１４",
			"備長炭１３",
			"びんたんすきですbyしゅーる",
			"備長炭１２",
			"ｓ",
			"備長炭１１",
			"びんちょうたんじゃねーしシュールだし",
			"スレタイなんてなかった",
			"備長炭１０",
			"ベル鯖ってまだ無料なの？",
			"備長炭９",
			"備長炭８",
			"【意味わかーん】しっかしシュールかーん？　４期【親の日】",
			"備長炭７",
			"とても】しっかりシュールｃｈ 3期【親（ひと）しい】",
			"備長炭６",
			"備長炭５",
			"【盲腸だから】しっかりシュールch ２期【病室配信】",
			"備長炭４",
			"【数々の】しっかりシュールch １期【名言出します】",
			"備長炭3",
			"俺が安価を踏む！！！！！！！！　ぶらっく04",
			"備長炭2",
			"セシリス＝リンス",
			"備長炭",
			"みかかch",
			"癌蓄",
			"ぶらっく03",
			"ぶらっく02",
			"ぶらっく01",
			"【すんごくいいよ】ちなみに何のシュールch76【リリースしてこ】",
		};

		#endregion

		[TestMethod]
		// スレッド一覧の更新
		public void Test_Update_ThreadList()
		{
			ThreadSelectViewModel modelView = new ThreadSelectViewModel();
			modelView.PropertyChanged += modelView_PropertyChanged;

			// 更新
			modelView.Update("http://jbbs.livedoor.jp/bbs/read.cgi/game/45037/1286755510/");
		}

		void modelView_PropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			// プロパティ変更通知の確認
			Assert.AreEqual(e.PropertyName, ThreadSelectViewModel.Property.ThreadList);

			// スレッド一覧取得
			List<ThreadInfo> threadList = ((ThreadSelectViewModel)sender).ThreadList;

			// スレッドリストの更新確認
			Assert.IsTrue(threadList.Count > 0);

			// スレッドタイトルの取得確認
			for (int i = 0; i < threadList.Count; i++)
			{
				Assert.AreEqual(threadList[i].ThreadTitle, TestDataThreadTitle[i]);
			}
		}
	}
}
